(()=>{"use strict";var t={56:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},72:t=>{var n=[];function e(t){for(var e=-1,o=0;o<n.length;o++)if(n[o].identifier===t){e=o;break}return e}function o(t,o){for(var r={},s=[],a=0;a<t.length;a++){var c=t[a],l=o.base?c[0]+o.base:c[0],u=r[l]||0,d="".concat(l," ").concat(u);r[l]=u+1;var p=e(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(f);else{var h=i(f,o);o.byIndex=a,n.splice(a,0,{identifier:d,updater:h,references:1})}s.push(d)}return s}function i(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,i){var r=o(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=e(r[s]);n[a].references--}for(var c=o(t,i),l=0;l<r.length;l++){var u=e(r[l]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}r=c}}},113:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",o=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),o&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),o&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,o,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);o&&s[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),e&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=e):u[2]=e),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),n.push(u))}},n}},365:(t,n,e)=>{e.d(n,{A:()=>a});var o=e(601),i=e.n(o),r=e(314),s=e.n(r)()(i());s.push([t.id,"body {\n    margin: 0;\n    padding: 0;\n    font-family: Arial, sans-serif;\n}\n\n#workspace {\n    width: 100%;\n    height: 100%;\n    background: white;\n} ",""]);const a=s},540:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var n={};t.exports=function(t,e){var o=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var i=void 0!==e.layer;i&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,i&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var r=e.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(o,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}}},n={};function e(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={id:o,exports:{}};return t[o](r,r.exports,e),r.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.nc=void 0;var o=e(72),i=e.n(o),r=e(825),s=e.n(r),a=e(659),c=e.n(a),l=e(56),u=e.n(l),d=e(540),p=e.n(d),f=e(113),h=e.n(f),y=e(365),v={};function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function b(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,w(o.key),o)}}function w(t){var n=function(t){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=g(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(n)?n:n+""}function P(t){var n="function"==typeof Map?new Map:void 0;return P=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(m())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var i=new(t.bind.apply(t,o));return e&&x(i,e.prototype),i}(t,arguments,k(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),x(e,t)},P(t)}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function x(t,n){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},x(t,n)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}v.styleTagTransform=h(),v.setAttributes=u(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),i()(y.A,v),y.A&&y.A.locals&&y.A.locals;var S=function(t){function n(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(t,n,e){return n=k(n),function(t,n){if(n&&("object"==g(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(n,e||[],k(t).constructor):n.apply(t,e))}(this,n)).attachShadow({mode:"open"}),t.canvas=null,t.ctx=null,t.points=[],t.firstPoint=null,t.secondPoint=null,t.isClockwise=!0,t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&x(t,n)}(n,t),e=n,o=[{key:"connectedCallback",value:function(){this.render(),this.setupCanvas(),this.setupEventListeners()}},{key:"render",value:function(){this.shadowRoot.innerHTML='\n            <style>\n                :host {\n                    display: block;\n                    width: 100%;\n                    height: 100%;\n                }\n                canvas {\n                    width: 100%;\n                    height: 100%;\n                }\n            </style>\n            <canvas id="canvas"></canvas>\n        '}},{key:"setupCanvas",value:function(){this.canvas=this.shadowRoot.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas()}},{key:"setupEventListeners",value:function(){var t=this;window.addEventListener("resize",(function(){return t.resizeCanvas()})),this.canvas.addEventListener("click",(function(n){return t.handleClick(n)}))}},{key:"resizeCanvas",value:function(){var t=this.closest(".workspace");this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight}},{key:"handleClick",value:function(t){var n=this.canvas.getBoundingClientRect(),e=this.canvas.width/n.width,o=this.canvas.height/n.height,i=(t.clientX-n.left)*e,r=(t.clientY-n.top)*o;this.dispatchEvent(new CustomEvent("canvas-click",{detail:{x:i,y:r},bubbles:!0,composed:!0}))}},{key:"drawPoints",value:function(){var t=this;this.ctx.fillStyle="#fff4c3",this.ctx.strokeStyle="black",this.ctx.lineWidth=2,this.points.forEach((function(n,e){t.ctx.beginPath(),t.ctx.arc(n.x,n.y,7.5,0,2*Math.PI),t.ctx.fill(),t.ctx.stroke(),t.ctx.fillStyle="black",t.ctx.font="12px Arial",t.ctx.textAlign="center",t.ctx.textBaseline="bottom",t.ctx.fillText("p".concat(e+1),n.x,n.y-10),t.ctx.fillStyle="#fff4c3"}))}},{key:"drawPolygon",value:function(){if(!(this.points.length<3)){this.ctx.beginPath(),this.ctx.moveTo(this.points[0].x,this.points[0].y);for(var t=1;t<this.points.length;t++)this.ctx.lineTo(this.points[t].x,this.points[t].y);this.ctx.closePath(),this.ctx.strokeStyle="black",this.ctx.lineWidth=1,this.ctx.stroke()}}},{key:"drawPath",value:function(){if(null!==this.firstPoint&&null!==this.secondPoint){this.ctx.beginPath(),this.ctx.moveTo(this.points[this.firstPoint].x,this.points[this.firstPoint].y);for(var t=this.firstPoint,n=[];t!==this.secondPoint;)n.push(t),t=this.isClockwise?(t+1)%this.points.length:(t-1+this.points.length)%this.points.length;n.push(this.secondPoint);for(var e=0;e<n.length;e++)this.ctx.lineTo(this.points[n[e]].x,this.points[n[e]].y);this.ctx.strokeStyle="#3399fd",this.ctx.lineWidth=3,this.ctx.stroke()}}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"setPoints",value:function(t){this.points=t,this.clear(),this.drawPoints()}},{key:"setPath",value:function(t,n,e){this.firstPoint=t,this.secondPoint=n,this.isClockwise=e,this.clear(),this.drawPoints(),this.drawPolygon(),this.drawPath()}}],o&&b(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o}(P(HTMLElement));function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function C(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,R(o.key),o)}}function R(t){var n=function(t){if("object"!=E(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=E(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(n)?n:n+""}function O(t){var n="function"==typeof Map?new Map:void 0;return O=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(j())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var i=new(t.bind.apply(t,o));return e&&I(i,e.prototype),i}(t,arguments,M(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),I(e,t)},O(t)}function j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(j=function(){return!!t})()}function I(t,n){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},I(t,n)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}customElements.define("polygon-canvas",S);var T=function(t){function n(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(t,n,e){return n=M(n),function(t,n){if(n&&("object"==E(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,j()?Reflect.construct(n,e||[],M(t).constructor):n.apply(t,e))}(this,n)).attachShadow({mode:"open"}),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&I(t,n)}(n,t),e=n,(o=[{key:"connectedCallback",value:function(){this.render(),this.setupEventListeners()}},{key:"render",value:function(){this.shadowRoot.innerHTML='\n            <style>\n                :host {\n                    display: flex;\n                    flex-direction: column;\n                    width: 300px;\n                    padding: 20px;\n                    background-color: #4d4d4d;\n                    border-left: 1px solid #ddd;\n                }\n                button {\n                    margin: 5px 0;\n                    padding: 10px;\n                    background-color: #999999;\n                    color: white;\n                    border: 1px solid black;\n                    border-radius: 4px;\n                    cursor: pointer;\n                }\n                button:disabled {\n                    background-color: #cccccc;\n                    cursor: not-allowed;\n                }\n                #clear {\n                    background-color: #999999;\n                }\n                #pointCount {\n                    color: red;\n                    text-align: right;\n                    font-size: 10px;\n                }\n                #pointCount.ready {\n                    color: green;\n                }\n                .section-title {\n                    color: white;\n                    margin: 15px 0 5px 0;\n                    font-weight: bold;\n                    text-align: center;\n                    font-size: 16px;\n                }\n                .point-selection {\n                    display: flex;\n                    align-items: center;\n                    gap: 10px;\n                }\n                .point-selection button {\n                    width: 70%;\n                }\n                .point-selection .selected-point {\n                    width: 30%;\n                    padding: 10px;\n                    background-color: #4d4d4d;\n                    color: white;\n                    border-radius: 4px;\n                    text-align: center;\n                }\n                .info {\n                    margin-top: 20px;\n                    padding: 10px;\n                    background-color: #4d4d4d;\n                    color: white;\n                    border-radius: 4px;\n                }\n            </style>\n            <div class="section-title">Create Polygon</div>\n            <button id="createPoints">Create points</button>\n            <div id="pointCount">Created 0 points</div>\n            <button id="drawPolygon">Draw polygon</button>\n            <div class="section-title">Create Path</div>\n            <div class="point-selection">\n                <button id="selectFirstPoint">First point</button>\n                <div class="selected-point" id="firstPoint">-</div>\n            </div>\n            <div class="point-selection">\n                <button id="selectSecondPoint">Second point</button>\n                <div class="selected-point" id="secondPoint">-</div>\n            </div>\n            <button id="toggleDirection">Clockwise</button>\n            <button id="clear">Clear</button>\n            <div class="info">\n                <div>Path: <span id="pathInfo">-</span></div>\n            </div>\n        '}},{key:"setupEventListeners",value:function(){var t=this;this.shadowRoot.getElementById("createPoints").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("create-points"))})),this.shadowRoot.getElementById("drawPolygon").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("draw-polygon"))})),this.shadowRoot.getElementById("selectFirstPoint").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("select-first-point"))})),this.shadowRoot.getElementById("selectSecondPoint").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("select-second-point"))})),this.shadowRoot.getElementById("toggleDirection").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("toggle-direction"))})),this.shadowRoot.getElementById("clear").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("clear"))}))}},{key:"updatePointCount",value:function(t){var n=this.shadowRoot.getElementById("pointCount");n.textContent="Created ".concat(t," points"),n.classList.toggle("ready",t>=3),this.shadowRoot.getElementById("drawPolygon").disabled=t<3}},{key:"updateFirstPointInfo",value:function(t){this.shadowRoot.getElementById("firstPoint").textContent=null!==t?"p".concat(t+1):"-"}},{key:"updateSecondPointInfo",value:function(t){this.shadowRoot.getElementById("secondPoint").textContent=null!==t?"p".concat(t+1):"-"}},{key:"updatePathInfo",value:function(t,n,e){var o=this.shadowRoot.getElementById("pathInfo");if(null!==t&&null!==n){for(var i=[],r=t;r!==n;)i.push("p".concat(r+1)),r=e?(r+1)%this.totalPoints:(r-1+this.totalPoints)%this.totalPoints;i.push("p".concat(n+1)),o.textContent=i.join(" → ")}else o.textContent="-"}},{key:"enablePointSelection",value:function(){this.shadowRoot.getElementById("selectFirstPoint").disabled=!1,this.shadowRoot.getElementById("selectSecondPoint").disabled=!1}},{key:"enableDirectionToggle",value:function(){this.shadowRoot.getElementById("toggleDirection").disabled=!1}},{key:"updateDirectionButton",value:function(t){this.shadowRoot.getElementById("toggleDirection").textContent=t?"Clockwise":"Counterclockwise"}},{key:"clear",value:function(){this.shadowRoot.getElementById("createPoints").disabled=!1,this.shadowRoot.getElementById("drawPolygon").disabled=!0,this.shadowRoot.getElementById("selectFirstPoint").disabled=!0,this.shadowRoot.getElementById("selectSecondPoint").disabled=!0,this.shadowRoot.getElementById("toggleDirection").disabled=!0,this.shadowRoot.getElementById("toggleDirection").textContent="Clockwise",this.shadowRoot.getElementById("firstPoint").textContent="-",this.shadowRoot.getElementById("secondPoint").textContent="-",this.shadowRoot.getElementById("pathInfo").textContent="-"}},{key:"setTotalPoints",value:function(t){this.totalPoints=t}}])&&C(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o}(O(HTMLElement));function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function L(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,D(o.key),o)}}function D(t){var n=function(t){if("object"!=B(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=B(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(n)?n:n+""}function _(t){var n="function"==typeof Map?new Map:void 0;return _=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,n,e){if(F())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,n);var i=new(t.bind.apply(t,o));return e&&q(i,e.prototype),i}(t,arguments,A(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),q(e,t)},_(t)}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function q(t,n){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},q(t,n)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}customElements.define("polygon-panel",T);var H=function(t){function n(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=function(t,n,e){return n=A(n),function(t,n){if(n&&("object"==B(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(n,e||[],A(t).constructor):n.apply(t,e))}(this,n)).attachShadow({mode:"open"}),t.points=[],t.firstPoint=null,t.secondPoint=null,t.isClockwise=!0,t.isDrawingMode=!1,t.isFirstPointMode=!1,t.isSecondPointMode=!1,t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&q(t,n)}(n,t),e=n,o=[{key:"connectedCallback",value:function(){this.render(),this.setupEventListeners(),this.loadFromLocalStorage()}},{key:"render",value:function(){this.shadowRoot.innerHTML='\n            <style>\n                :host {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    width: 100%;\n                    height: 100vh;\n                    background-color: #4d4d4d;\n                }\n                .workspace {\n                    width: 1000px;\n                    height: 600px;\n                    border: 1px solid #ccc;\n                    position: relative;\n                    background-color: #999999;\n                    display: flex;\n                }\n                polygon-panel {\n                    height: 600px;\n                }\n            </style>\n            <div class="workspace">\n                <polygon-canvas></polygon-canvas>\n            </div>\n            <polygon-panel></polygon-panel>\n        '}},{key:"setupEventListeners",value:function(){var t=this,n=this.shadowRoot.querySelector("polygon-canvas"),e=this.shadowRoot.querySelector("polygon-panel");n.addEventListener("canvas-click",(function(n){var e=n.detail,o=e.x,i=e.y;t.isFirstPointMode?t.selectFirstPoint(o,i):t.isSecondPointMode?t.selectSecondPoint(o,i):t.isDrawingMode&&t.addPoint(o,i)})),e.addEventListener("create-points",(function(){return t.startPointCreation()})),e.addEventListener("draw-polygon",(function(){return t.drawPolygon()})),e.addEventListener("select-first-point",(function(){return t.startFirstPointSelection()})),e.addEventListener("select-second-point",(function(){return t.startSecondPointSelection()})),e.addEventListener("toggle-direction",(function(){return t.toggleDirection()})),e.addEventListener("clear",(function(){return t.clear()}))}},{key:"addPoint",value:function(t,n){this.points.length>=15||(this.points.some((function(e){return Math.sqrt(Math.pow(e.x-t,2)+Math.pow(e.y-n,2))<30}))?alert("Нельзя создавать точки слишком близко друг к другу"):(this.points.push({x:t,y:n}),this.updatePointCount(),this.saveToLocalStorage(),this.shadowRoot.querySelector("polygon-canvas").setPoints(this.points)))}},{key:"updatePointCount",value:function(){this.shadowRoot.querySelector("polygon-panel").updatePointCount(this.points.length)}},{key:"startPointCreation",value:function(){this.isDrawingMode=!0,this.points=[],this.firstPoint=null,this.secondPoint=null,this.isClockwise=!0,this.updatePointCount(),this.shadowRoot.querySelector("polygon-canvas").clear(),this.shadowRoot.querySelector("polygon-panel").clear()}},{key:"drawPolygon",value:function(){this.isDrawingMode=!1;var t=this.shadowRoot.querySelector("polygon-canvas");t.setPoints(this.points),t.drawPolygon();var n=this.shadowRoot.querySelector("polygon-panel");n.setTotalPoints(this.points.length),n.enablePointSelection()}},{key:"startFirstPointSelection",value:function(){this.isFirstPointMode=!0,this.isSecondPointMode=!1,this.shadowRoot.querySelector("polygon-panel").updateFirstPointInfo(null)}},{key:"startSecondPointSelection",value:function(){this.isFirstPointMode=!1,this.isSecondPointMode=!0,this.shadowRoot.querySelector("polygon-panel").updateSecondPointInfo(null)}},{key:"selectFirstPoint",value:function(t,n){var e=this.findNearestPoint(t,n);if(-1!==e){this.firstPoint=e,this.isFirstPointMode=!1,this.updatePath();var o=this.shadowRoot.querySelector("polygon-panel");o.updateFirstPointInfo(this.firstPoint),null!==this.secondPoint&&this.firstPoint!==this.secondPoint&&o.enableDirectionToggle()}else alert("Выберите точку ближе к существующим точкам")}},{key:"selectSecondPoint",value:function(t,n){var e=this.findNearestPoint(t,n);if(-1!==e)if(e!==this.firstPoint){this.secondPoint=e,this.isSecondPointMode=!1,this.updatePath();var o=this.shadowRoot.querySelector("polygon-panel");o.updateSecondPointInfo(this.secondPoint),null!==this.firstPoint&&o.enableDirectionToggle()}else alert("Выберите другую точку");else alert("Выберите точку ближе к существующим точкам")}},{key:"findNearestPoint",value:function(t,n){var e=1/0,o=-1;return this.points.forEach((function(i,r){var s=Math.sqrt(Math.pow(i.x-t,2)+Math.pow(i.y-n,2));s<e&&s<30&&(e=s,o=r)})),o}},{key:"toggleDirection",value:function(){this.isClockwise=!this.isClockwise,this.updatePath(),this.shadowRoot.querySelector("polygon-panel").updateDirectionButton(this.isClockwise)}},{key:"updatePath",value:function(){null!==this.firstPoint&&null!==this.secondPoint&&(this.shadowRoot.querySelector("polygon-canvas").setPath(this.firstPoint,this.secondPoint,this.isClockwise),this.shadowRoot.querySelector("polygon-panel").updatePathInfo(this.firstPoint,this.secondPoint,this.isClockwise))}},{key:"clear",value:function(){this.points=[],this.firstPoint=null,this.secondPoint=null,this.isClockwise=!0,this.isDrawingMode=!1,this.isFirstPointMode=!1,this.isSecondPointMode=!1,this.shadowRoot.querySelector("polygon-canvas").clear();var t=this.shadowRoot.querySelector("polygon-panel");t.clear(),t.updatePointCount(0),localStorage.removeItem("polygonData")}},{key:"saveToLocalStorage",value:function(){var t={points:this.points,firstPoint:this.firstPoint,secondPoint:this.secondPoint,isClockwise:this.isClockwise};localStorage.setItem("polygonData",JSON.stringify(t))}},{key:"loadFromLocalStorage",value:function(){var t=localStorage.getItem("polygonData");if(t){var n=JSON.parse(t);this.points=n.points,this.firstPoint=n.firstPoint,this.secondPoint=n.secondPoint,this.isClockwise=n.isClockwise,this.updatePointCount(),this.drawPolygon(),this.updatePath()}}}],o&&L(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,o}(_(HTMLElement));customElements.define("polygon-app",H)})();